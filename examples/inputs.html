<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>WorkflowJS Input Example</title>
    <link rel="stylesheet" href="/Content/bootstrap.css" type="text/css" />
    <link rel="stylesheet" href="css/app.css" type="text/css" />
    <script src="/Scripts/jquery-1.9.1.min.js"></script>
    <script src="/Scripts/bootstrap.min.js"></script>
    <script src="scripts/lib/workflow.js"></script>
    <script src="scripts/activities/AddActivity.js"></script>
    <script src="scripts/inputs.js"></script>
</head>
<body>

    <div class="container">
        <h1>WorkflowJS Input Example</h1>

        This example demonstrates input and output for an Activity

        <h2>Activity Code</h2>

        <div>

            <!-- Nav tabs -->
            <ul class="nav nav-tabs" role="tablist">
                <li role="presentation" class="active"><a href="#typescript" aria-controls="typescript" role="tab" data-toggle="tab">TypeScript</a></li>
                <li role="presentation"><a href="#javascript" aria-controls="javascript" role="tab" data-toggle="tab">JavaScript</a></li>
            </ul>

            <!-- Tab panes -->
            <div class="tab-content">
                <div role="tabpanel" class="tab-pane active" id="typescript">
<pre>
export class AddActivity implements wfjs.Activity
{
    public $inputs = ['number1', 'number2'];
    public $outputs = ['total'];
    public Execute(context: wfjs.ActivityContext, done: (err?: Error) => void): void
    {
        var number1: number = context.Inputs['number1'];
        var number2: number = context.Inputs['number2'];
        context.Outputs['total'] = number1 + number2;
        done();
    }
}
</pre>

                </div>
                <div role="tabpanel" class="tab-pane" id="javascript">
<pre>
function AddActivity() {
    this.$inputs = ['number1', 'number2'];
    this.$outputs = ['total'];
}
AddActivity.prototype.Execute = function (context, done) {
    var number1 = context.Inputs['number1'];
    var number2 = context.Inputs['number2'];
    context.Outputs['total'] = number1 + number2;
    done();
};
</pre>
                </div>
            </div>

        </div>

        <h2>Demo</h2>

        <div>

            <!-- Nav tabs -->
            <ul class="nav nav-tabs" role="tablist">
                <li role="presentation" class="active"><a href="#demo" aria-controls="demo" role="tab" data-toggle="tab">Demo</a></li>
                <li role="presentation"><a href="#htmlfile" aria-controls="htmlfile" role="tab" data-toggle="tab">inputs.html</a></li>
                <li role="presentation"><a href="#typescriptfile" aria-controls="typescriptfile" role="tab" data-toggle="tab">inputs.ts</a></li>
                <li role="presentation"><a href="#javascriptfile" aria-controls="javascriptfile" role="tab" data-toggle="tab">inputs.js</a></li>
            </ul>

            <!-- Tab panes -->
            <div class="tab-content">
                <div role="tabpanel" class="tab-pane active" id="demo">

                    <table class="table-condensed" style="width:auto;">
                        <tr>
                            <td><input type="number" id="number1" value="" /></td>
                            <td>+</td>
                            <td><input type="number" id="number2" value="" /></td>
                            <td>=</td>
                            <td><div id="result">?</div></td>
                        </tr>
                        <tr>
                            <td colspan="5"><input id="button" type="button" value="calculate" /></td>
                        </tr>
                    </table>

                </div>
                <div role="tabpanel" class="tab-pane" id="htmlfile">
<pre>
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;title&gt;WorkflowJS Input Example&lt;/title&gt;
    &lt;script src="/Scripts/jquery-1.9.1.min.js"&gt;&lt;/script&gt;
    &lt;script src="scripts/lib/workflow.js"&gt;&lt;/script&gt;
    &lt;script src="scripts/activities/AddActivity.js"&gt;&lt;/script&gt;
    &lt;script src="scripts/inputs.js"&gt;&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;table class="table-condensed" style="width:auto;"&gt;
        &lt;tr&gt;
            &lt;td&gt;&lt;input type="number" id="number1" value="" /&gt;&lt;/td&gt;
            &lt;td&gt;+&lt;/td&gt;
            &lt;td&gt;&lt;input type="number" id="number2" value="" /&gt;&lt;/td&gt;
            &lt;td&gt;=&lt;/td&gt;
            &lt;td&gt;&lt;div id="result"&gt;?&lt;/div&gt;&lt;/td&gt;
        &lt;/tr&gt;
        &lt;tr&gt;
            &lt;td colspan="5"&gt;&lt;input id="button" type="button" value="calculate" /&gt;&lt;/td&gt;
        &lt;/tr&gt;
    &lt;/table&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>
                </div>
                <div role="tabpanel" class="tab-pane" id="typescriptfile">

<pre>
/// &lt;reference path="../../Scripts/typings/jquery/jquery.d.ts" /&gt;

module wfjsExample.Inputs
{
    class Application
    {
        constructor(
            private number1: JQuery,
            private number2: JQuery,
            private button: JQuery,
            private result: JQuery)
        {
            this.button.click(() =&gt; this.Click());
        }
        
        public Click()
        {
            var activity = new wfjs.Activities.AddActivity();
            var inputs: wfjs.Dictionary&lt;any&gt; = {
                'number1': parseFloat(this.number1.val()) || 0,
                'number2': parseFloat(this.number2.val()) || 0
            };

            wfjs.WorkflowInvoker
                .CreateActivity(activity)
                .Inputs(inputs)
                .Invoke((err, ctx) =&gt;
                {
                    if (err != null)
                    {
                        this.result.text('Finished with error: ' + err.toString());
                    }
                    else
                    {
                        this.result.text(ctx.Outputs['total']);
                    }
                });
        }
    }

    window.onload = () =&gt;
    {
        var app = new Application($('#number1'), $('#number2'), $('#button'), $('#result'));
    };
}
</pre>

                </div>
                <div role="tabpanel" class="tab-pane" id="javascriptfile">

<pre>
/// &lt;reference path="../../Scripts/typings/jquery/jquery.d.ts" /&gt;
var wfjsExample;
(function (wfjsExample) {
    var Inputs;
    (function (Inputs) {
        var Application = (function () {
            function Application(number1, number2, button, result) {
                var _this = this;
                this.number1 = number1;
                this.number2 = number2;
                this.button = button;
                this.result = result;
                this.button.click(function () { return _this.Click(); });
            }
            Application.prototype.Click = function () {
                var _this = this;
                var activity = new wfjs.Activities.AddActivity();
                var inputs = {
                    'number1': parseFloat(this.number1.val()) || 0,
                    'number2': parseFloat(this.number2.val()) || 0
                };
                wfjs.WorkflowInvoker.CreateActivity(activity).Inputs(inputs).Invoke(function (err, ctx) {
                    if (err != null) {
                        _this.result.text('Finished with error: ' + err.toString());
                    }
                    else {
                        _this.result.text(ctx.Outputs['total']);
                    }
                });
            };
            return Application;
        })();
        window.onload = function () {
            var app = new Application($('#number1'), $('#number2'), $('#button'), $('#result'));
        };
    })(Inputs = wfjsExample.Inputs || (wfjsExample.Inputs = {}));
})(wfjsExample || (wfjsExample = {}));
//# sourceMappingURL=inputs.js.map
</pre>

                </div>
            </div>

        </div>

    </div>

</body>
</html>
